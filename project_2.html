
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Prediksi Harga Telur Ayam &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'project_2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Laporan Project 1" href="project_3.html" />
    <link rel="prev" title="Prediksi Penyakit Diabetes" href="project_1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="My sample book - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    PROYEK SAINS DATA
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="project_1.html">Prediksi Penyakit Diabetes</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Prediksi Harga Telur Ayam</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_3.html">Laporan Project 1</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fproject_2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/project_2.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Prediksi Harga Telur Ayam</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#latar-belakang">Latar Belakang</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rumusan-masalah">Rumusan Masalah</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tujuan">Tujuan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sumber-data">Sumber Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-data-preparation">a. Data Preparation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-data-wrangling">b. Data Wrangling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-data-understanding">c. Data Understanding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-preprocessing-data">d. Preprocessing Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sliding-windows">sliding windows</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#normalisasi-data">Normalisasi data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mengatur-data-testing-dan-training">Mengatur data testing dan training</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#e-modelling">e. Modelling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-forest">random forest</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#g-random-forest-ensamble-baggig">g. Random forest &amp; ensamble baggig</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#h-testing-data-baru">h. Testing data baru</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#i-decision-tree">i. decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">Kesimpulan</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="prediksi-harga-telur-ayam">
<h1>Prediksi Harga Telur Ayam<a class="headerlink" href="#prediksi-harga-telur-ayam" title="Link to this heading">#</a></h1>
<section id="latar-belakang">
<h2>Latar Belakang<a class="headerlink" href="#latar-belakang" title="Link to this heading">#</a></h2>
<p style="text-indent: 50px; text-align: justify;">Harga telur ayam di pasar modern di Provinsi Jawa Timur telah menunjukkan variasi yang signifikan dalam beberapa tahun terakhir. Perubahan harga telur ayam tidak hanya dipengaruhi oleh factor-faktor ekonomi dan produksi, tetapi juga oleh ketersediaan stok, preferensi konsumen, dan masih banyak lagi. Salah satu perusahaan yang berperan penting dalam industry ini adalah PT Japfa Comfeed Indonesia Tbk (JAPFA), yang terlibat dalam penyerapan produksi telur ayam dari peternak guna membantu menstabilkan harga di tingkat peternak. Melalui program penyerapan telur nasional, JAPFA berkomitmen untuk mendukung peternak local dan meningkatkan konsumsi protein hewani di masyarakat.
Analisis time series dapat membantu memahami kecenderungan dan pola perubahan harga telur ayam di pasar modern di Jawa Timur. Dengan menggunakan data historis harga telur ayam,penelitian ini dapat menganalisis tren harga, mengetahui pola perubahan, dan memprediksi harga telur ayam di minggu berikutnya. Oleh karena itu, penelitian ini bertujuan untuk menganalisis tren harga telur ayam di pasar modern di Provinsi Jawa Timur dan memprediksi harga telur ayam di minggu berikutnya.
</p>
</section>
<section id="rumusan-masalah">
<h2>Rumusan Masalah<a class="headerlink" href="#rumusan-masalah" title="Link to this heading">#</a></h2>
<p style="text-indent: 50px; text-align: justify;">Bagaimana memprediksi harga telur ayam di pasar modern di Provinsi Jawa Timur pada minggu berikutnya menggunakan analisis time series?</p>
</section>
<section id="tujuan">
<h2>Tujuan<a class="headerlink" href="#tujuan" title="Link to this heading">#</a></h2>
<p style="text-indent: 50px; text-align: justify;"> Tujuan dari penelitian ini adalah untuk menganalisis tren harga telur ayam di pasar modern di Provinsi Jawa Timur dan memprediksi harga telur ayam di minggu berikutnya berdasarkan pola perubahan harga tersebut. Penelitian ini juga berharap untuk dapat membantu penjual dan pembeli telur ayam meminimalkan resiko lonjakan harga dan memaksimalkan keuntungan yang dapat mereka peroleh, serta untuk mendapat algoritma terbaik untuk prediksi harga telur ayam. 
</p>
</section>
<section id="sumber-data">
<h2>Sumber Data<a class="headerlink" href="#sumber-data" title="Link to this heading">#</a></h2>
<p style="text-indent: 50px; text-align: justify;">Dataset ini berasal dari https://www.bi.go.id/hargapangan yang berbentuk time series dengan fitur yaitu tanggal dan harga telur ayam. dataset ini merupakan time series mingguan.  </p>
<section id="a-data-preparation">
<h3>a. Data Preparation<a class="headerlink" href="#a-data-preparation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">MinMaxScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="b-data-wrangling">
<h3>b. Data Wrangling<a class="headerlink" href="#b-data-wrangling" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Membaca file Excel dari URL raw GitHub</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/mellychandrawardani/mellychandrawardani/raw/main/Tabel_Harga_Telur.xlsx&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>        Tanggal Harga Telur
0  01/ 01/ 2021      26,500
1  08/ 01/ 2021      25,800
2  15/ 01/ 2021      24,950
3  22/ 01/ 2021      23,950
4  29/ 01/ 2021      23,000
</pre></div>
</div>
</div>
</div>
<p style="text-indent: 50px; text-align: justify;"> 
Dataset ini memiliki:
Jumlah Atribut/Feature: 9 (berisi informasi demografis dan kesehatan).
Jumlah Data: 499 (entri responden).
Jumlah Label: 1 (status diabetes).
Jumlah Kelas: 2 (0: tidak diabetes, 1: diabetes).</p>
</section>
<section id="c-data-understanding">
<h3>c. Data Understanding<a class="headerlink" href="#c-data-understanding" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pastikan kolom &#39;Tanggal&#39; dalam format datetime dengan dayfirst=True</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="c1"># Mengatur kolom &#39;Tanggal&#39; sebagai indeks</span>
<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Menghapus spasi dari kolom &#39;Harga Telur&#39;, mengganti &#39;-&#39; dengan NaN, dan mengubahnya menjadi numeric</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="c1"># Menampilkan 5 baris pertama untuk memastikan</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>            Harga Telur
Tanggal                
2021-01-01      26500.0
2021-01-08      25800.0
2021-01-15      24950.0
2021-01-22      23950.0
2021-01-29      23000.0
</pre></div>
</div>
</div>
</div>
<p style="text-indent: 50px; text-align: justify;">Transformasi data ini bertujuan untuk mempersiapkan dataset agar siap digunakan dalam analisis berbasis waktu. Kolom `Tanggal` dikonversi ke format datetime dan diatur sebagai indeks untuk mempermudah pengolahan data berbasis waktu, seperti analisis tren atau *resampling*. Pada kolom `Harga Telur`, pembersihan dilakukan dengan mengganti simbol `'-'` menjadi `NaN` dan menghapus spasi agar data menjadi bersih dan konsisten dalam format numerik. Hasilnya, dataset lebih terstruktur dengan indeks waktu yang jelas dan data harga yang dapat digunakan untuk analisis lebih lanjut.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>  <span class="c1"># Menampilkan informasi umum mengenai DataFrame, termasuk jumlah entri, jumlah kolom, tipe data setiap kolom, dan apakah ada nilai kosong (non-null).</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ukuran data &#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># Menampilkan ukuran data dalam format tuple (jumlah baris, jumlah kolom).</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>  <span class="c1"># Menampilkan tipe data dari setiap kolom dalam DataFrame.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 196 entries, 2021-01-01 to 2024-09-27
Data columns (total 1 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   Harga Telur  196 non-null    float64
dtypes: float64(1)
memory usage: 3.1 KB
Ukuran data  (196, 1)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Harga Telur    float64
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mencari Missing Value</span>
<span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Harga Telur    0
dtype: int64
</pre></div>
</div>
</div>
</div>
</section>
<section id="d-preprocessing-data">
<h3>d. Preprocessing Data<a class="headerlink" href="#d-preprocessing-data" title="Link to this heading">#</a></h3>
<section id="sliding-windows">
<h4>sliding windows<a class="headerlink" href="#sliding-windows" title="Link to this heading">#</a></h4>
<p style="text-indent: 50px; text-align: justify;">label encoding : Encoding digunakan untuk mengubah data kategorikal menjadi format numerik, sehingga dapat digunakan dalam analisis dan algoritma pembelajaran mesin.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Membuat fitur lag untuk harga: harga-1, harga-2, harga-3, harga-4</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Harga Telur satu hari sebelumnya</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur-2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Harga Telur dua hari sebelumnya</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur-3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Harga Telur tiga hari sebelumnya</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur-4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Harga Telur empat hari sebelumnya</span>

<span class="c1"># Menghapus baris yang memiliki nilai NaN</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mengatur ulang kolom sehingga Harga Telur berada di kolom terakhir</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Harga Telur-4&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-3&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-2&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur&#39;</span><span class="p">]]</span>

<span class="c1"># Menampilkan 5 baris pertama untuk memastikan fitur lag telah ditambahkan</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>            Harga Telur-4  Harga Telur-3  Harga Telur-2  Harga Telur-1  \
Tanggal                                                                  
2021-01-29        26500.0        25800.0        24950.0        23950.0   
2021-02-05        25800.0        24950.0        23950.0        23000.0   
2021-02-12        24950.0        23950.0        23000.0        22100.0   
2021-02-19        23950.0        23000.0        22100.0        23450.0   
2021-02-26        23000.0        22100.0        23450.0        23750.0   

            Harga Telur  
Tanggal                  
2021-01-29      23000.0  
2021-02-05      22100.0  
2021-02-12      23450.0  
2021-02-19      23750.0  
2021-02-26      24350.0  
</pre></div>
</div>
</div>
</div>
</section>
<section id="normalisasi-data">
<h4>Normalisasi data<a class="headerlink" href="#normalisasi-data" title="Link to this heading">#</a></h4>
<p style="text-indent: 50px; text-align: justify;"> Normalisasi Min-Max adalah metode transformasi data untuk menskalakan nilai-nilai dalam rentang tertentu, biasanya antara 0 dan 1, menggunakan rumus: \( X' = \frac{X - X_{min}}{X_{max} - X_{min}} \), di mana \( X \) adalah nilai asli, \( X_{min} \) adalah nilai minimum, dan \( X_{max} \) adalah nilai maksimum dari dataset. Pada tabel hasil normalisasi di atas, semua nilai pada kolom **Harga Telur-4** hingga **Harga Telur** sudah disesuaikan ke rentang 0 hingga 1. Misalnya, nilai awal harga telur yang lebih tinggi mendekati angka 1 (seperti 0.589844 pada **2021-01-29**), sedangkan nilai yang lebih rendah mendekati angka 0 (seperti 0.246094 pada **2021-02-05**). Normalisasi ini membantu meratakan skala data, sehingga lebih cocok untuk digunakan dalam algoritma machine learning atau analisis statistik.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inisialisasi scaler untuk fitur (input) dan target (output)</span>
<span class="n">scaler_features</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">scaler_target</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>

<span class="c1"># Normalisasi fitur (Harga-1, Harga-2, Harga-3, Harga-4, Harga-5)</span>
<span class="n">df_features_normalized</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaler_features</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Harga Telur-4&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-3&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-2&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">]]),</span>
                                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Harga Telur-4&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-3&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-2&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">],</span>
                                      <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># Normalisasi target (Harga Telur)</span>
<span class="n">df_target_normalized</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scaler_target</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]]),</span>
                                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">],</span>
                                    <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># Gabungkan kembali dataframe yang sudah dinormalisasi</span>
<span class="n">df_normalized</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_features_normalized</span><span class="p">,</span> <span class="n">df_target_normalized</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_normalized</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Harga Telur-4</th>
      <th>Harga Telur-3</th>
      <th>Harga Telur-2</th>
      <th>Harga Telur-1</th>
      <th>Harga Telur</th>
    </tr>
    <tr>
      <th>Tanggal</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-01-29</th>
      <td>0.589844</td>
      <td>0.535156</td>
      <td>0.468750</td>
      <td>0.390625</td>
      <td>0.316406</td>
    </tr>
    <tr>
      <th>2021-02-05</th>
      <td>0.535156</td>
      <td>0.468750</td>
      <td>0.390625</td>
      <td>0.316406</td>
      <td>0.246094</td>
    </tr>
    <tr>
      <th>2021-02-12</th>
      <td>0.468750</td>
      <td>0.390625</td>
      <td>0.316406</td>
      <td>0.246094</td>
      <td>0.351562</td>
    </tr>
    <tr>
      <th>2021-02-19</th>
      <td>0.390625</td>
      <td>0.316406</td>
      <td>0.246094</td>
      <td>0.351562</td>
      <td>0.375000</td>
    </tr>
    <tr>
      <th>2021-02-26</th>
      <td>0.316406</td>
      <td>0.246094</td>
      <td>0.351562</td>
      <td>0.375000</td>
      <td>0.421875</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="mengatur-data-testing-dan-training">
<h4>Mengatur data testing dan training<a class="headerlink" href="#mengatur-data-testing-dan-training" title="Link to this heading">#</a></h4>
<p style="text-indent: 50px; text-align: justify;">Mengatur data *training* dan *testing* adalah proses membagi dataset menjadi dua bagian: satu untuk melatih model (*training set*) dan satu lagi untuk menguji performa model (*testing set*). **Training set** digunakan untuk melatih model agar dapat memahami pola dan karakteristik data. Sedangkan **testing set** digunakan untuk mengevaluasi seberapa baik model yang telah dilatih dapat memprediksi data baru yang belum pernah dilihat sebelumnya. Pembagian 80% untuk *training* dan 20% untuk *testing* atau variasi lain yang sesuai kebutuhan.
<p>Pada <strong>Data Train</strong> terdiri dari 153 baris data historis <em>Harga Telur</em> dari periode waktu tertentu, digunakan untuk melatih model. Sementara itu, <strong>Data Testing</strong> memuat data terbaru dari Januari 2024 yang digunakan untuk mengevaluasi performa model prediksi. Pengaturan seperti ini penting agar model tidak hanya “menghafal” data, melainkan mampu melakukan generalisasi dengan baik terhadap data baru.</p></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mengatur fitur (X) dan target (y)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df_normalized</span><span class="p">[[</span><span class="s1">&#39;Harga Telur-4&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-3&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-2&#39;</span><span class="p">,</span> <span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">]]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_normalized</span><span class="p">[</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">]</span>

<span class="c1"># Membagi data menjadi training dan testing (80% training, 20% testing)</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===== Data Train =====&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===== Data Testing ====&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># Mengambil nilai tanggal dari indeks X_train dan X_test</span>
<span class="n">dates_train</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">index</span>
<span class="n">dates_test</span> <span class="o">=</span> <span class="n">X_test</span><span class="o">.</span><span class="n">index</span>

<span class="c1"># Plot data training</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates_train</span><span class="p">,</span> <span class="n">X_train</span><span class="p">[</span><span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data Training&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>

<span class="c1"># Plot data testing</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates_test</span><span class="p">,</span> <span class="n">X_test</span><span class="p">[</span><span class="s1">&#39;Harga Telur-1&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data Testing&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="c1"># Menambahkan judul, label, dan legenda</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pembagian Data Training dan Testing Berdasarkan Harga Telur&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Harga Telur&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>  <span class="c1"># Rotasi label sumbu x agar mudah dibaca</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>===== Data Train =====
            Harga Telur-4  Harga Telur-3  Harga Telur-2  Harga Telur-1
Tanggal                                                               
2021-01-29       0.589844       0.535156       0.468750       0.390625
2021-02-05       0.535156       0.468750       0.390625       0.316406
2021-02-12       0.468750       0.390625       0.316406       0.246094
2021-02-19       0.390625       0.316406       0.246094       0.351562
2021-02-26       0.316406       0.246094       0.351562       0.375000
...                   ...            ...            ...            ...
2023-12-01       0.445312       0.476562       0.550781       0.570312
2023-12-08       0.476562       0.550781       0.570312       0.550781
2023-12-15       0.550781       0.570312       0.550781       0.593750
2023-12-22       0.570312       0.550781       0.593750       0.585938
2023-12-29       0.550781       0.593750       0.585938       0.582031

[153 rows x 4 columns]
===== Data Testing ====
            Harga Telur-4  Harga Telur-3  Harga Telur-2  Harga Telur-1
Tanggal                                                               
2024-01-05       0.593750       0.585938       0.582031       0.558594
2024-01-12       0.585938       0.582031       0.558594       0.523438
2024-01-19       0.582031       0.558594       0.523438       0.558594
2024-01-26       0.558594       0.523438       0.558594       0.558594
2024-02-02       0.523438       0.558594       0.558594       0.585938
2024-02-09       0.558594       0.558594       0.585938       0.550781
2024-02-16       0.558594       0.585938       0.550781       0.593750
2024-02-23       0.585938       0.550781       0.593750       0.609375
2024-03-01       0.550781       0.593750       0.609375       0.695312
2024-03-08       0.593750       0.609375       0.695312       0.855469
2024-03-15       0.609375       0.695312       0.855469       0.917969
2024-03-22       0.695312       0.855469       0.917969       0.957031
2024-03-29       0.855469       0.917969       0.957031       0.968750
2024-04-05       0.917969       0.957031       0.968750       0.964844
2024-04-12       0.957031       0.968750       0.964844       0.941406
2024-04-19       0.968750       0.964844       0.941406       0.910156
2024-04-26       0.964844       0.941406       0.910156       0.769531
2024-05-03       0.941406       0.910156       0.769531       0.730469
2024-05-10       0.910156       0.769531       0.730469       0.718750
2024-05-17       0.769531       0.730469       0.718750       0.773438
2024-05-24       0.730469       0.718750       0.773438       0.792969
2024-05-31       0.718750       0.773438       0.792969       0.812500
2024-06-07       0.773438       0.792969       0.812500       0.785156
2024-06-14       0.792969       0.812500       0.785156       0.761719
2024-06-21       0.812500       0.785156       0.761719       0.742188
2024-06-28       0.785156       0.761719       0.742188       0.742188
2024-07-05       0.761719       0.742188       0.742188       0.726562
2024-07-12       0.742188       0.742188       0.726562       0.703125
2024-07-19       0.742188       0.726562       0.703125       0.695312
2024-07-26       0.726562       0.703125       0.695312       0.699219
2024-08-02       0.703125       0.695312       0.699219       0.679688
2024-08-09       0.695312       0.699219       0.679688       0.675781
2024-08-16       0.699219       0.679688       0.675781       0.648438
2024-08-23       0.679688       0.675781       0.648438       0.648438
2024-08-30       0.675781       0.648438       0.648438       0.613281
2024-09-06       0.648438       0.648438       0.613281       0.593750
2024-09-13       0.648438       0.613281       0.593750       0.550781
2024-09-20       0.613281       0.593750       0.550781       0.613281
2024-09-27       0.593750       0.550781       0.613281       0.617188
</pre></div>
</div>
<img alt="_images/9db54643cf69341da854347d5d44c86cd0f1ac76714cf81611c82c7bfa448f3c.png" src="_images/9db54643cf69341da854347d5d44c86cd0f1ac76714cf81611c82c7bfa448f3c.png" />
</div>
</div>
</section>
</section>
</section>
<section id="e-modelling">
<h2>e. Modelling<a class="headerlink" href="#e-modelling" title="Link to this heading">#</a></h2>
<section id="random-forest">
<h3>random forest<a class="headerlink" href="#random-forest" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import library yang diperlukan</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>  <span class="c1"># Untuk model Random Forest</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">r2_score</span>  <span class="c1"># Untuk evaluasi model</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>  <span class="c1"># Untuk manipulasi array</span>

<span class="c1"># Inisialisasi dan latih model Random Forest</span>
<span class="n">rf_model</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># Membuat model dengan 100 pohon</span>
<span class="n">rf_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>  <span class="c1"># Melatih model dengan data pelatihan</span>

<span class="c1"># Prediksi pada data uji</span>
<span class="n">y_pred_rf</span> <span class="o">=</span> <span class="n">rf_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>  <span class="c1"># Melakukan prediksi pada data uji</span>

<span class="c1"># Evaluasi model</span>
<span class="n">mse_rf</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Mean Squared Error (MSE)</span>
<span class="n">r2_rf</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_rf</span><span class="p">)</span>  <span class="c1"># Menghitung R-squared (R²)</span>
<span class="n">rmse_rf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Root Mean Squared Error (RMSE)</span>

<span class="c1"># Fungsi untuk menghitung MAPE</span>
<span class="k">def</span> <span class="nf">mean_absolute_percentage_error</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">y_true</span> <span class="o">-</span> <span class="n">y_pred</span><span class="p">)</span> <span class="o">/</span> <span class="n">y_true</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

<span class="c1"># Hitung MAPE</span>
<span class="n">mape_rf</span> <span class="o">=</span> <span class="n">mean_absolute_percentage_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_rf</span><span class="p">)</span>

<span class="c1"># Menampilkan hasil evaluasi</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Root Mean Squared Error (RMSE - Random Forest): </span><span class="si">{</span><span class="n">rmse_rf</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean Squared Error (MSE - Random Forest): </span><span class="si">{</span><span class="n">mse_rf</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;R-squared (R² - Random Forest): </span><span class="si">{</span><span class="n">r2_rf</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean Absolute Percentage Error (MAPE - Random Forest): </span><span class="si">{</span><span class="n">mape_rf</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Root Mean Squared Error (RMSE - Random Forest): 0.06
Mean Squared Error (MSE - Random Forest): 0.00
R-squared (R² - Random Forest): 0.75
Mean Absolute Percentage Error (MAPE - Random Forest): 7.13%
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Data tanggal dan harga asli</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Tanggal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;23/08/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;30/08/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;06/09/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;13/09/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;20/09/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;27/09/2024&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Harga_Asli&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">26800</span><span class="p">,</span> <span class="mi">26550</span><span class="p">,</span> <span class="mi">26000</span><span class="p">,</span> <span class="mi">26800</span><span class="p">,</span> <span class="mi">26850</span><span class="p">,</span> <span class="mi">26100</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Mengonversi ke DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)</span>  <span class="c1"># Mengonversi string tanggal menjadi datetime</span>

<span class="c1"># Data harga prediksi (ganti dengan prediksi model Anda)</span>
<span class="n">predicted_prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">26600</span><span class="p">,</span> <span class="mi">26400</span><span class="p">,</span> <span class="mi">25900</span><span class="p">,</span> <span class="mi">26700</span><span class="p">,</span> <span class="mi">26900</span><span class="p">,</span> <span class="mi">26200</span><span class="p">]</span>  <span class="c1"># Contoh prediksi, sesuaikan dengan model Anda</span>

<span class="c1"># Membuat plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Harga_Asli&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Harga Asli&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>  <span class="c1"># Garis untuk harga asli</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">],</span> <span class="n">predicted_prices</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Harga Prediksi&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>  <span class="c1"># Garis untuk harga prediksi</span>

<span class="c1"># Menambahkan label dan judul</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Harga&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Prediksi Harga Menggunakan Random Forest&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>  <span class="c1"># Memutar label tanggal agar lebih mudah dibaca</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  <span class="c1"># Mengatur tata letak agar tidak ada yang terpotong</span>

<span class="c1"># Menampilkan plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/167abd1fd413cfa32ade72d699ea6c070a2495773d2434f290580c1a797bb40f.png" src="_images/167abd1fd413cfa32ade72d699ea6c070a2495773d2434f290580c1a797bb40f.png" />
</div>
</div>
<p style="text-indent: 50px; text-align: justify;">Model Random Forest menunjukkan performa yang baik:
Akurasi: 88%
Precision: 92.3%
Recall: 81.8%
R-squared score sebesar 78.2% menunjukkan bahwa model mampu menjelaskan sebagian besar variasi dalam data.
RMSE rendah (0.315) menunjukkan bahwa tingkat kesalahan prediksi cukup kecil. </p>
</section>
</section>
<section id="g-random-forest-ensamble-baggig">
<h2>g. Random forest &amp; ensamble baggig<a class="headerlink" href="#g-random-forest-ensamble-baggig" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">BaggingRegressor</span><span class="p">,</span> <span class="n">RandomForestRegressor</span>  <span class="c1"># Mengimpor model RandomForestRegressor dan BaggingRegressor dari scikit-learn</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">r2_score</span>  <span class="c1"># Mengimpor metrik evaluasi</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>  <span class="c1"># Mengimpor library numpy untuk operasi numerik</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  <span class="c1"># Mengimpor library pandas untuk manipulasi data</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># Mengimpor matplotlib untuk visualisasi</span>

<span class="c1"># Inisialisasi dan latih model Random Forest</span>
<span class="n">rf_model</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># Membuat instance RandomForestRegressor dengan 100 pohon dan seed untuk reproduksibilitas.</span>
<span class="n">rf_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>  <span class="c1"># Melatih model dengan data pelatihan.</span>

<span class="c1"># Prediksi pada data uji</span>
<span class="n">y_pred_rf</span> <span class="o">=</span> <span class="n">rf_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>  <span class="c1"># Menggunakan model untuk memprediksi nilai pada data uji.</span>

<span class="c1"># Evaluasi model</span>
<span class="n">mse_rf</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Mean Squared Error (MSE) untuk prediksi Random Forest.</span>
<span class="n">r2_rf</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_rf</span><span class="p">)</span>  <span class="c1"># Menghitung R-squared (R²) untuk mengevaluasi model.</span>

<span class="c1"># Menghitung RMSE</span>
<span class="n">rmse_rf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Root Mean Squared Error (RMSE) dari MSE.</span>

<span class="c1"># Menampilkan hasil evaluasi</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Root Mean Squared Error (Random Forest): </span><span class="si">{</span><span class="n">rmse_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Mencetak RMSE untuk model Random Forest.</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean Squared Error (Random Forest): </span><span class="si">{</span><span class="n">mse_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Mencetak MSE untuk model Random Forest.</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;R-squared (Random Forest): </span><span class="si">{</span><span class="n">r2_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Mencetak R² untuk model Random Forest.</span>

<span class="c1"># Inisialisasi model Bagging dengan Random Forest sebagai base estimator</span>
<span class="n">bagging_rf_model</span> <span class="o">=</span> <span class="n">BaggingRegressor</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span> <span class="n">n_estimators</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># Membuat model Bagging dengan 10 estimators.</span>
<span class="c1"># Latih model Bagging pada data pelatihan</span>
<span class="n">bagging_rf_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>  <span class="c1"># Melatih model Bagging menggunakan data pelatihan.</span>

<span class="c1"># Prediksi pada data uji</span>
<span class="n">y_pred_bagging_rf</span> <span class="o">=</span> <span class="n">bagging_rf_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>  <span class="c1"># Menggunakan model untuk memprediksi nilai pada data uji.</span>

<span class="c1"># Evaluasi model Bagging</span>
<span class="n">mse_bagging_rf</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_bagging_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Mean Squared Error (MSE) untuk prediksi Bagging</span>
<span class="n">r2_bagging_rf</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_bagging_rf</span><span class="p">)</span>  <span class="c1"># Menghitung R-squared untuk evaluasi kualitas model</span>
<span class="c1"># Menghitung RMSE</span>
<span class="n">rmse_bagging_rf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse_bagging_rf</span><span class="p">)</span>  <span class="c1"># Menghitung Root Mean Squared Error (RMSE) dari MSE</span>

<span class="c1"># Tampilkan hasil evaluasi</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bagging Model (Random Forest) - Root Mean Squared Error: </span><span class="si">{</span><span class="n">rmse_bagging_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Menampilkan RMSE</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bagging Model (Random Forest) - Mean Squared Error: </span><span class="si">{</span><span class="n">mse_bagging_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Menampilkan MSE</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bagging Model (Random Forest) - R-squared: </span><span class="si">{</span><span class="n">r2_bagging_rf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Menampilkan nilai R-squared</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Root Mean Squared Error (Random Forest): 0.06335557163665129
Mean Squared Error (Random Forest): 0.004013928457406853
R-squared (Random Forest): 0.7518627430770033
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bagging Model (Random Forest) - Root Mean Squared Error: 0.059691309035939895
Bagging Model (Random Forest) - Mean Squared Error: 0.0035630523744240796
Bagging Model (Random Forest) - R-squared: 0.7797354756457867
</pre></div>
</div>
</div>
</div>
<p style="text-indent: 50px; text-align: justify;">Model memprediksi data baru termasuk ke dalam kelas 1 karena probabilitasnya melebihi threshold 0.7. Hal ini menunjukkan bahwa model cukup yakin data tersebut milik kelas 1. Akurasi model yang tinggi (95%) mendukung keandalan prediksi ini.</p>
</section>
<section id="h-testing-data-baru">
<h2>h. Testing data baru<a class="headerlink" href="#h-testing-data-baru" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Contoh data pelatihan (gantilah dengan data pelatihan sebenarnya)</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">28450</span><span class="p">,</span> <span class="mi">28250</span><span class="p">,</span> <span class="mi">27950</span><span class="p">,</span> <span class="mi">27850</span><span class="p">],</span> <span class="p">[</span><span class="mi">27900</span><span class="p">,</span> <span class="mi">27650</span><span class="p">,</span> <span class="mi">27600</span><span class="p">,</span> <span class="mi">27250</span><span class="p">],</span> <span class="p">[</span><span class="mi">27250</span><span class="p">,</span> <span class="mi">26800</span><span class="p">,</span> <span class="mi">26550</span><span class="p">,</span> <span class="mi">26000</span><span class="p">]])</span>  <span class="c1"># Data fitur pelatihan</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">26800</span><span class="p">],</span> <span class="p">[</span><span class="mi">26850</span><span class="p">],</span> <span class="p">[</span><span class="mi">26100</span><span class="p">]])</span>  <span class="c1"># Target pelatihan</span>

<span class="c1"># Inisialisasi dan fit scaler dengan data pelatihan</span>
<span class="n">scaler_features</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">scaler_target</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>

<span class="c1"># Fit scaler pada data fitur dan target</span>
<span class="n">X_train_normalized</span> <span class="o">=</span> <span class="n">scaler_features</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">y_train_normalized</span> <span class="o">=</span> <span class="n">scaler_target</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Inisialisasi dan fit model Random Forest dengan data pelatihan yang telah dinormalisasi</span>
<span class="n">random_forest_model</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">()</span>
<span class="n">random_forest_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_normalized</span><span class="p">,</span> <span class="n">y_train_normalized</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>

<span class="c1"># Fungsi untuk memprediksi Harga berdasarkan input dari pengguna menggunakan Random Forest Regressor</span>
<span class="k">def</span> <span class="nf">predict_custom_data_rf</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
    <span class="c1"># Normalisasi data input menggunakan scaler yang sama dengan data pelatihan</span>
    <span class="n">input_data_normalized</span> <span class="o">=</span> <span class="n">scaler_features</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

    <span class="c1"># Prediksi dengan model Random Forest Regressor</span>
    <span class="n">predicted_normalized</span> <span class="o">=</span> <span class="n">random_forest_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">input_data_normalized</span><span class="p">)</span>

    <span class="c1"># Mengembalikan prediksi ke skala asli</span>
    <span class="n">predicted_original</span> <span class="o">=</span> <span class="n">scaler_target</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">predicted_normalized</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">predicted_original</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># Mengembalikan nilai prediksi dalam bentuk skalar.</span>

<span class="c1"># Meminta input dari pengguna</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Masukkan nilai Harga dari hari-hari sebelumnya:&quot;</span><span class="p">)</span>
<span class="n">Harga_1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 1 hari sebelumnya: &quot;</span><span class="p">))</span>
<span class="n">Harga_2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 2 hari sebelumnya: &quot;</span><span class="p">))</span>
<span class="n">Harga_3</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 3 hari sebelumnya: &quot;</span><span class="p">))</span>
<span class="n">Harga_4</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 4 hari sebelumnya: &quot;</span><span class="p">))</span>

<span class="c1"># Data input yang dimasukkan oleh pengguna</span>
<span class="n">user_input</span> <span class="o">=</span> <span class="p">[</span><span class="n">Harga_1</span><span class="p">,</span> <span class="n">Harga_2</span><span class="p">,</span> <span class="n">Harga_3</span><span class="p">,</span> <span class="n">Harga_4</span><span class="p">]</span>

<span class="c1"># Prediksi Harga untuk data yang dimasukkan menggunakan Random Forest</span>
<span class="n">predicted_value_rf</span> <span class="o">=</span> <span class="n">predict_custom_data_rf</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>

<span class="c1"># Menampilkan hasil prediksi</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Prediksi Harga untuk hari selanjutnya adalah: </span><span class="si">{</span><span class="n">predicted_value_rf</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Masukkan nilai Harga dari hari-hari sebelumnya:
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">36</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> <span class="c1"># Meminta input dari pengguna</span>
<span class="g g-Whitespace">     </span><span class="mi">35</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Masukkan nilai Harga dari hari-hari sebelumnya:&quot;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">36</span> <span class="n">Harga_1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 1 hari sebelumnya: &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span> <span class="n">Harga_2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 2 hari sebelumnya: &quot;</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">38</span> <span class="n">Harga_3</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Harga 3 hari sebelumnya: &quot;</span><span class="p">))</span>

<span class="nn">File ~\AppData\Local\Programs\Python\Python311\Lib\site-packages\ipykernel\kernelbase.py:1181,</span> in <span class="ni">Kernel.raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1179</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allow_stdin</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1180</span>     <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1181</span>     <span class="k">raise</span> <span class="n">StdinNotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1182</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_request</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1183</span>     <span class="nb">str</span><span class="p">(</span><span class="n">prompt</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1184</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_parent_ident</span><span class="p">[</span><span class="s2">&quot;shell&quot;</span><span class="p">],</span>
<span class="g g-Whitespace">   </span><span class="mi">1185</span>     <span class="bp">self</span><span class="o">.</span><span class="n">get_parent</span><span class="p">(</span><span class="s2">&quot;shell&quot;</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1186</span>     <span class="n">password</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1187</span> <span class="p">)</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
</section>
<section id="i-decision-tree">
<h2>i. decision tree<a class="headerlink" href="#i-decision-tree" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeRegressor</span>

<span class="c1"># Memisahkan data fitur dan target</span>
<span class="n">target_column</span> <span class="o">=</span> <span class="s1">&#39;Index&#39;</span>  <span class="c1"># Sesuaikan dengan nama kolom target Anda</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">target_column</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span>

<span class="c1"># Menghapus kolom bertipe datetime jika ada</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime64&#39;</span><span class="p">])</span>

<span class="c1"># Alternatif: Mengonversi kolom datetime ke format numerik (opsional)</span>
<span class="k">if</span> <span class="s1">&#39;Tanggal&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">X</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tanggal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">days</span>

<span class="c1"># Membagi data menjadi set pelatihan dan pengujian</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># Inisialisasi model Decision Tree Regressor</span>
<span class="n">dt_model</span> <span class="o">=</span> <span class="n">DecisionTreeRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># Melatih model pada data pelatihan</span>
<span class="n">dt_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Memprediksi hasil pada data uji</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">dt_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># Menghitung Mean Squared Error (MSE) dan Root Mean Squared Error (RMSE)</span>
<span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean Squared Error (MSE) dari Decision Tree Regressor:&quot;</span><span class="p">,</span> <span class="n">mse</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Root Mean Squared Error (RMSE) dari Decision Tree Regressor:&quot;</span><span class="p">,</span> <span class="n">rmse</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="kesimpulan">
<h2>Kesimpulan<a class="headerlink" href="#kesimpulan" title="Link to this heading">#</a></h2>
<p style="text-indent: 50px; text-align: justify;">kesimpulan metode random forest biasa maupun random forest&ensamble bagging menghasilkan mse yg bagus untuk prediksi ini yaitu 0,00 </p></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="project_1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Prediksi Penyakit Diabetes</p>
      </div>
    </a>
    <a class="right-next"
       href="project_3.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Laporan Project 1</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#latar-belakang">Latar Belakang</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rumusan-masalah">Rumusan Masalah</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tujuan">Tujuan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sumber-data">Sumber Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-data-preparation">a. Data Preparation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-data-wrangling">b. Data Wrangling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-data-understanding">c. Data Understanding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-preprocessing-data">d. Preprocessing Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sliding-windows">sliding windows</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#normalisasi-data">Normalisasi data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mengatur-data-testing-dan-training">Mengatur data testing dan training</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#e-modelling">e. Modelling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-forest">random forest</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#g-random-forest-ensamble-baggig">g. Random forest &amp; ensamble baggig</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#h-testing-data-baru">h. Testing data baru</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#i-decision-tree">i. decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">Kesimpulan</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>